{"ast":null,"code":"import _slicedToArray from\"/home/fabbry/Desktop/Mern-Calendari/calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Calendar,momentLocalizer}from'react-big-calendar';import moment from'moment';import{uiOpenModal}from'../../actions/ui';import{Nabvar}from'../ui/Nabvar';import{messages}from'../../helpers/calendar-messages';import'react-big-calendar/lib/css/react-big-calendar.css';import'moment/locale/es';import{CalendarEvent}from'./CalendarEvent';import{CalendarModal}from'./CalendarModal';import{useDispatch,useSelector}from'react-redux';import{eventClearActiveEvent,eventSetActive,eventStartLoading}from'../../actions/events';import{AddNewFab}from'../ui/AddNewFab';import{DeleteEventFab}from'../ui/DeleteEventFab';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";moment.locale('es');var localizer=momentLocalizer(moment);// or globalizeLocalizer\nexport var CalendarScreen=function CalendarScreen(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.calendar;}),events=_useSelector.events,activeEvent=_useSelector.activeEvent;var _useSelector2=useSelector(function(state){return state.auth;}),uid=_useSelector2.uid;var _useState=useState(localStorage.getItem('lastView')||'month'),_useState2=_slicedToArray(_useState,2),lastView=_useState2[0],setLastView=_useState2[1];useEffect(function(){dispatch(eventStartLoading());},[dispatch]);var onDoubleClick=function onDoubleClick(e){dispatch(uiOpenModal());};var onSelectEvent=function onSelectEvent(e){dispatch(eventSetActive(e));};var onViewChange=function onViewChange(e){setLastView(e);localStorage.setItem('lastView',e);};var onSelectSlot=function onSelectSlot(e){dispatch(eventClearActiveEvent());};var eventStyleGetter=function eventStyleGetter(event,start,end,bgcolor,notes){var style={backgroundColor:uid===event.user._id?'#367CF7':'#465660',borderRadius:'0px',opacity:0.8,display:'block',color:'white'};return{style:style};};return/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-screen\",children:[/*#__PURE__*/_jsx(Nabvar,{}),/*#__PURE__*/_jsx(Calendar,{localizer:localizer,events:events,startAccessor:\"start\",endAccessor:\"end\",messages:messages,eventPropGetter:eventStyleGetter,components:{event:CalendarEvent},onView:onViewChange,onSelectSlot:onSelectSlot,selectable:true,view:lastView,onDoubleClickEvent:onDoubleClick,onSelectEvent:onSelectEvent,onViewChange:onViewChange}),/*#__PURE__*/_jsx(CalendarModal,{}),/*#__PURE__*/_jsx(AddNewFab,{}),activeEvent&&/*#__PURE__*/_jsx(DeleteEventFab,{})]});};","map":{"version":3,"sources":["/home/fabbry/Desktop/Mern-Calendari/calendar-app/src/components/calendar/CalendarScreen.js"],"names":["React","useEffect","useState","Calendar","momentLocalizer","moment","uiOpenModal","Nabvar","messages","CalendarEvent","CalendarModal","useDispatch","useSelector","eventClearActiveEvent","eventSetActive","eventStartLoading","AddNewFab","DeleteEventFab","locale","localizer","CalendarScreen","dispatch","state","calendar","events","activeEvent","auth","uid","localStorage","getItem","lastView","setLastView","onDoubleClick","e","onSelectEvent","onViewChange","setItem","onSelectSlot","eventStyleGetter","event","start","end","bgcolor","notes","style","backgroundColor","user","_id","borderRadius","opacity","display","color"],"mappings":"uKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,QAAT,CAAmBC,eAAnB,KAA0C,oBAA1C,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA,OAASC,MAAT,KAAuB,cAAvB,CACA,OAASC,QAAT,KAAyB,iCAAzB,CAEA,MAAO,mDAAP,CACA,MAAO,kBAAP,CACA,OAASC,aAAT,KAA8B,iBAA9B,CACA,OAASC,aAAT,KAA8B,iBAA9B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,qBAAT,CAAgCC,cAAhC,CAAgDC,iBAAhD,KAAyE,sBAAzE,CACA,OAASC,SAAT,KAA0B,iBAA1B,CACA,OAASC,cAAT,KAA+B,sBAA/B,C,wFAEAZ,MAAM,CAACa,MAAP,CAAc,IAAd,EAEA,GAAMC,CAAAA,SAAS,CAAGf,eAAe,CAACC,MAAD,CAAjC,CAA2C;AAE3C,MAAO,IAAMe,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAEhC,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CAFgC,iBAGAC,WAAW,CAAC,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACC,QAAV,EAAN,CAHX,CAGxBC,MAHwB,cAGxBA,MAHwB,CAGhBC,WAHgB,cAGhBA,WAHgB,mBAIhBb,WAAW,CAAC,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACI,IAAV,EAAN,CAJK,CAIxBC,GAJwB,eAIxBA,GAJwB,eAMAzB,QAAQ,CAAC0B,YAAY,CAACC,OAAb,CAAqB,UAArB,GAAoC,OAArC,CANR,wCAMzBC,QANyB,eAMfC,WANe,eAQhC9B,SAAS,CAAC,UAAM,CACZoB,QAAQ,CAACN,iBAAiB,EAAlB,CAAR,CACH,CAFQ,CAEN,CAACM,QAAD,CAFM,CAAT,CAIA,GAAMW,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CACzBZ,QAAQ,CAACf,WAAW,EAAZ,CAAR,CACH,CAFD,CAIA,GAAM4B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACD,CAAD,CAAO,CACzBZ,QAAQ,CAACP,cAAc,CAACmB,CAAD,CAAf,CAAR,CACH,CAFD,CAIA,GAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACF,CAAD,CAAO,CACxBF,WAAW,CAACE,CAAD,CAAX,CACAL,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAiCH,CAAjC,EACH,CAHD,CAKA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,CAAD,CAAO,CACxBZ,QAAQ,CAACR,qBAAqB,EAAtB,CAAR,CACH,CAFD,CAIA,GAAMyB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAQC,KAAR,CAAeC,GAAf,CAAoBC,OAApB,CAA6BC,KAA7B,CAAuC,CAC5D,GAAMC,CAAAA,KAAK,CAAG,CACVC,eAAe,CAAGlB,GAAG,GAAKY,KAAK,CAACO,IAAN,CAAWC,GAApB,CAA2B,SAA3B,CAAuC,SAD9C,CAEVC,YAAY,CAAE,KAFJ,CAGVC,OAAO,CAAE,GAHC,CAIVC,OAAO,CAAE,OAJC,CAKVC,KAAK,CAAE,OALG,CAAd,CAQA,MAAO,CACHP,KAAK,CAALA,KADG,CAAP,CAIH,CAbD,CAeA,mBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,KAAC,MAAD,IADJ,cAGI,KAAC,QAAD,EACI,SAAS,CAAEzB,SADf,CAEI,MAAM,CAAEK,MAFZ,CAGI,aAAa,CAAC,OAHlB,CAII,WAAW,CAAC,KAJhB,CAKI,QAAQ,CAAEhB,QALd,CAMI,eAAe,CAAE8B,gBANrB,CAOI,UAAU,CAAE,CACRC,KAAK,CAAE9B,aADC,CAPhB,CAUI,MAAM,CAAE0B,YAVZ,CAWI,YAAY,CAAEE,YAXlB,CAYI,UAAU,CAAE,IAZhB,CAaI,IAAI,CAAEP,QAbV,CAcI,kBAAkB,CAAEE,aAdxB,CAeI,aAAa,CAAEE,aAfnB,CAgBI,YAAY,CAAEC,YAhBlB,EAHJ,cAsBI,KAAC,aAAD,IAtBJ,cAuBI,KAAC,SAAD,IAvBJ,CAyBSV,WAAD,eAAiB,KAAC,cAAD,IAzBzB,GADJ,CAgCH,CA5EM","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport moment from 'moment';\nimport { uiOpenModal } from '../../actions/ui';\n\nimport { Nabvar } from '../ui/Nabvar';\nimport { messages } from '../../helpers/calendar-messages';\n\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport 'moment/locale/es';\nimport { CalendarEvent } from './CalendarEvent';\nimport { CalendarModal } from './CalendarModal';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { eventClearActiveEvent, eventSetActive, eventStartLoading } from '../../actions/events';\nimport { AddNewFab } from '../ui/AddNewFab';\nimport { DeleteEventFab } from '../ui/DeleteEventFab';\n\nmoment.locale('es');\n\nconst localizer = momentLocalizer(moment); // or globalizeLocalizer\n\nexport const CalendarScreen = () => {\n\n    const dispatch = useDispatch();\n    const { events, activeEvent } = useSelector(state => state.calendar)\n    const { uid } = useSelector(state => state.auth);\n\n    const [lastView, setLastView] = useState(localStorage.getItem('lastView') || 'month');\n\n    useEffect(() => {\n        dispatch(eventStartLoading());\n    }, [dispatch]);\n\n    const onDoubleClick = (e) => {\n        dispatch(uiOpenModal());\n    }\n\n    const onSelectEvent = (e) => {\n        dispatch(eventSetActive(e));\n    }\n\n    const onViewChange = (e) => {\n        setLastView(e);\n        localStorage.setItem('lastView', e);\n    }\n\n    const onSelectSlot = (e) => {\n        dispatch(eventClearActiveEvent());\n    }\n\n    const eventStyleGetter = (event, start, end, bgcolor, notes) => {\n        const style = {\n            backgroundColor: (uid === event.user._id) ? '#367CF7' : '#465660',\n            borderRadius: '0px',\n            opacity: 0.8,\n            display: 'block',\n            color: 'white'\n        }\n\n        return {\n            style\n        }\n\n    };\n\n    return (\n        <div className=\"calendar-screen\">\n            <Nabvar />\n\n            <Calendar\n                localizer={localizer}\n                events={events}\n                startAccessor=\"start\"\n                endAccessor=\"end\"\n                messages={messages}\n                eventPropGetter={eventStyleGetter}\n                components={{\n                    event: CalendarEvent\n                }}\n                onView={onViewChange}\n                onSelectSlot={onSelectSlot}\n                selectable={true}\n                view={lastView}\n                onDoubleClickEvent={onDoubleClick}\n                onSelectEvent={onSelectEvent}\n                onViewChange={onViewChange}\n            />\n\n            <CalendarModal />\n            <AddNewFab />\n            {\n                (activeEvent) && <DeleteEventFab />\n            }\n\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}