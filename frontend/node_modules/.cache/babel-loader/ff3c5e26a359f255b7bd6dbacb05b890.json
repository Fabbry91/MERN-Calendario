{"ast":null,"code":"import _defineProperty from\"/home/fabbry/Desktop/Mern-Calendari/calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/fabbry/Desktop/Mern-Calendari/calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/fabbry/Desktop/Mern-Calendari/calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useState}from'react';import Modal from'react-modal';import moment from'moment';import DateTimePicker from'react-datetime-picker';import Swal from'sweetalert2';import{useSelector,useDispatch}from'react-redux';//para estar pendiente de algo\nimport{uiCloseModal}from'../../actions/ui';import{eventClearActiveEvent,eventStartAddNew,eventStartUpdate}from'../../actions/events';import{useEffect}from'react';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var customStyle={content:{top:'50%',left:'50%',right:'auto',bottom:'auto',marginRight:'-50%',transform:'translate(-50%, -50%)'}};Modal.setAppElement('#root');var now=moment().minutes(0).second(0).add(1,'hours');var now2=now.clone().add(1,'hours');var initEvent={title:'',notes:'',start:now.toDate(),end:now2.toDate()};export var CalendarModal=function CalendarModal(){var _useSelector=useSelector(function(state){return state.ui;}),modalOpen=_useSelector.modalOpen;var _useSelector2=useSelector(function(state){return state.calendar;}),activeEvent=_useSelector2.activeEvent;var dispatch=useDispatch();var _useState=useState(now.toDate()),_useState2=_slicedToArray(_useState,2),dateStart=_useState2[0],setDateStart=_useState2[1];var _useState3=useState(now2.toDate()),_useState4=_slicedToArray(_useState3,2),dateEnd=_useState4[0],setDateEnd=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),titleValid=_useState6[0],setTitleValid=_useState6[1];var _useState7=useState(initEvent),_useState8=_slicedToArray(_useState7,2),formValues=_useState8[0],setFormValues=_useState8[1];useEffect(function(){if(activeEvent){setFormValues(activeEvent);}else{setFormValues(initEvent);}},[activeEvent,setFormValues]);var title=formValues.title,notes=formValues.notes,start=formValues.start,end=formValues.end;var closeModal=function closeModal(){dispatch(uiCloseModal());dispatch(eventClearActiveEvent());setFormValues(initEvent);};var handleStartDateChange=function handleStartDateChange(e){setDateStart(e);setFormValues(_objectSpread(_objectSpread({},formValues),{},{start:e}));};var handleEndDateChange=function handleEndDateChange(e){setDateEnd(e);setFormValues(_objectSpread(_objectSpread({},formValues),{},{end:e}));};var hangleInputChange=function hangleInputChange(_ref){var target=_ref.target;setFormValues(_objectSpread(_objectSpread({},formValues),{},_defineProperty({},target.name,target.value)));};var handleSubmitForm=function handleSubmitForm(e){e.preventDefault();var momentStart=moment(start);var momentEnd=moment(end);if(momentStart.isSameOrAfter(momentEnd)){return Swal.fire('Error','La fecha fin debe de ser mayor a la fecha de inicio','error');}if(title.trim().length<2){return setTitleValid(false);}if(activeEvent){dispatch(eventStartUpdate(formValues));}else{dispatch(eventStartAddNew(formValues));}setTitleValid(true);closeModal();};return/*#__PURE__*/_jsxs(Modal,{isOpen:modalOpen,onRequestClose:closeModal,style:customStyle,closeTimeoutMS:200,className:\"modal\",overlayClassName:\"modal-fondo\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[activeEvent?'Editar evento':'Nuevo evento',\"  \"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"container\",onSubmit:handleSubmitForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha y hora inicio\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:handleStartDateChange,value:dateStart,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha y hora fin\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:handleEndDateChange,value:dateEnd,minDate:dateStart,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Titulo y notas\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(!titleValid&&'is-invalid',\" \"),placeholder:\"T\\xEDtulo del evento\",name:\"title\",autoComplete:\"off\",value:title,onChange:hangleInputChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Una descripci\\xF3n corta\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",placeholder:\"Notas\",rows:\"5\",name:\"notes\",value:notes,onChange:hangleInputChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Informaci\\xF3n adicional\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-outline-primary btn-block\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-save\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Guardar\"})]})]})]});};","map":{"version":3,"sources":["/home/fabbry/Desktop/Mern-Calendari/calendar-app/src/components/calendar/CalendarModal.js"],"names":["React","useState","Modal","moment","DateTimePicker","Swal","useSelector","useDispatch","uiCloseModal","eventClearActiveEvent","eventStartAddNew","eventStartUpdate","useEffect","customStyle","content","top","left","right","bottom","marginRight","transform","setAppElement","now","minutes","second","add","now2","clone","initEvent","title","notes","start","toDate","end","CalendarModal","state","ui","modalOpen","calendar","activeEvent","dispatch","dateStart","setDateStart","dateEnd","setDateEnd","titleValid","setTitleValid","formValues","setFormValues","closeModal","handleStartDateChange","e","handleEndDateChange","hangleInputChange","target","name","value","handleSubmitForm","preventDefault","momentStart","momentEnd","isSameOrAfter","fire","trim","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState } from 'react';\nimport Modal from 'react-modal';\nimport moment from 'moment'\nimport DateTimePicker from 'react-datetime-picker';\nimport Swal from 'sweetalert2';\nimport { useSelector, useDispatch } from 'react-redux'; //para estar pendiente de algo\nimport { uiCloseModal } from '../../actions/ui';\nimport { eventClearActiveEvent, eventStartAddNew, eventStartUpdate } from '../../actions/events';\nimport { useEffect } from 'react';\n\n\nconst customStyle = {\n    content: {\n        top: '50%',\n        left: '50%',\n        right: 'auto',\n        bottom: 'auto',\n        marginRight: '-50%',\n        transform: 'translate(-50%, -50%)'\n    }\n};\nModal.setAppElement('#root');\n\nconst now = moment().minutes(0).second(0).add(1, 'hours');\nconst now2 = now.clone().add(1, 'hours');\n\nconst initEvent = {\n    title: '',\n    notes: '',\n    start: now.toDate(),\n    end: now2.toDate()\n\n}\n\n\n\nexport const CalendarModal = () => {\n\n    const { modalOpen } = useSelector(state => state.ui);\n    const { activeEvent } = useSelector(state => state.calendar);\n    const dispatch = useDispatch();\n\n\n    const [dateStart, setDateStart] = useState(now.toDate());\n    const [dateEnd, setDateEnd] = useState(now2.toDate());\n    const [titleValid, setTitleValid] = useState(true);\n    const [formValues, setFormValues] = useState(initEvent);\n\n    useEffect(() => {\n        if (activeEvent) {\n            setFormValues(activeEvent);\n        } else {\n            setFormValues(initEvent);\n        }\n    }, [activeEvent, setFormValues]);\n\n    const { title, notes, start, end } = formValues;\n\n    const closeModal = () => {\n        dispatch(uiCloseModal());\n        dispatch(eventClearActiveEvent());\n        setFormValues(initEvent);\n    }\n\n    const handleStartDateChange = (e) => {\n        setDateStart(e);\n        setFormValues({\n            ...formValues,\n            start: e\n        })\n    }\n\n    const handleEndDateChange = (e) => {\n        setDateEnd(e);\n        setFormValues({\n            ...formValues,\n            end: e\n        })\n    }\n\n    const hangleInputChange = ({ target }) => {\n        setFormValues({\n            ...formValues,\n            [target.name]: target.value\n        });\n    };\n\n    const handleSubmitForm = (e) => {\n        e.preventDefault();\n\n        const momentStart = moment(start);\n        const momentEnd = moment(end);\n\n        if (momentStart.isSameOrAfter(momentEnd)) {\n            return Swal.fire('Error', 'La fecha fin debe de ser mayor a la fecha de inicio', 'error');\n        }\n        if (title.trim().length < 2) {\n            return setTitleValid(false);\n        }\n        if (activeEvent) {\n            dispatch(eventStartUpdate(formValues))\n        } else {\n            dispatch(eventStartAddNew(formValues));\n        }\n\n        setTitleValid(true);\n        closeModal();\n\n    };\n\n    return (\n        <Modal\n            isOpen={modalOpen}\n            onRequestClose={closeModal}\n            style={customStyle}\n            closeTimeoutMS={200}\n            className=\"modal\"\n            overlayClassName=\"modal-fondo\"\n        >\n            <h1>{(activeEvent) ? 'Editar evento' : 'Nuevo evento'}  </h1>\n            <hr />\n            <form\n                className=\"container\"\n                onSubmit={handleSubmitForm}>\n\n                <div className=\"form-group\">\n                    <label>Fecha y hora inicio</label>\n                    <DateTimePicker\n                        onChange={handleStartDateChange}\n                        value={dateStart}\n                        className=\"form-control\"\n                    />\n                </div>\n\n                <div className=\"form-group\">\n                    <label>Fecha y hora fin</label>\n                    <DateTimePicker\n                        onChange={handleEndDateChange}\n                        value={dateEnd}\n                        minDate={dateStart}\n                        className=\"form-control\"\n                    />\n                </div>\n\n                <hr />\n                <div className=\"form-group\">\n                    <label>Titulo y notas</label>\n                    <input\n                        type=\"text\"\n                        className={`form-control ${!titleValid && 'is-invalid'} `}\n                        placeholder=\"Título del evento\"\n                        name=\"title\"\n                        autoComplete=\"off\"\n                        value={title}\n                        onChange={hangleInputChange}\n                    />\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">Una descripción corta</small>\n                </div>\n\n                <div className=\"form-group\">\n                    <textarea\n                        type=\"text\"\n                        className=\"form-control\"\n                        placeholder=\"Notas\"\n                        rows=\"5\"\n                        name=\"notes\"\n                        value={notes}\n                        onChange={hangleInputChange}\n                    ></textarea>\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">Información adicional</small>\n                </div>\n\n                <button\n                    type=\"submit\"\n                    className=\"btn btn-outline-primary btn-block\"\n                >\n                    <i className=\"far fa-save\"></i>\n                    <span> Guardar</span>\n                </button>\n\n            </form>\n        </Modal>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}