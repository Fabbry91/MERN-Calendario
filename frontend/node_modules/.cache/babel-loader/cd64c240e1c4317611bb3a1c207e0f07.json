{"ast":null,"code":"import _defineProperty from\"/home/fabbry/Desktop/Mern-Calendari/calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/fabbry/Desktop/Mern-Calendari/calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/fabbry/Desktop/Mern-Calendari/calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import moment from'moment';import Modal from'react-modal';import DateTimePicker from'react-datetime-picker';import Swal from'sweetalert2';import{uiCloseModal}from'../../actions/ui';import{eventStartLoading}from'../../actions/events';import{eventClearActiveEvent,eventStartAddNew,eventStartUpdate}from'../../actions/events';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var customStyles={content:{top:'50%',left:'50%',right:'auto',bottom:'auto',marginRight:'-50%',transform:'translate(-50%, -50%)'}};Modal.setAppElement('#root');var now=moment().minutes(0).seconds(0).add(1,'hours');// 3:00:00\nvar nowPlus1=now.clone().add(1,'hours');var initEvent={title:'',notes:'',start:now.toDate(),end:nowPlus1.toDate()};export var CalendarModal=function CalendarModal(){var _useSelector=useSelector(function(state){return state.ui;}),modalOpen=_useSelector.modalOpen;var _useSelector2=useSelector(function(state){return state.calendar;}),activeEvent=_useSelector2.activeEvent;var dispatch=useDispatch();var _useState=useState(now.toDate()),_useState2=_slicedToArray(_useState,2),dateStart=_useState2[0],setDateStart=_useState2[1];var _useState3=useState(nowPlus1.toDate()),_useState4=_slicedToArray(_useState3,2),dateEnd=_useState4[0],setDateEnd=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),titleValid=_useState6[0],setTitleValid=_useState6[1];var _useState7=useState(initEvent),_useState8=_slicedToArray(_useState7,2),formValues=_useState8[0],setFormValues=_useState8[1];var notes=formValues.notes,title=formValues.title,start=formValues.start,end=formValues.end;useEffect(function(){if(activeEvent){setFormValues(activeEvent);}else{setFormValues(initEvent);}},[activeEvent,setFormValues]);var handleInputChange=function handleInputChange(_ref){var target=_ref.target;setFormValues(_objectSpread(_objectSpread({},formValues),{},_defineProperty({},target.name,target.value)));};var closeModal=function closeModal(){// TODO: cerrar el modal\ndispatch(uiCloseModal());dispatch(eventClearActiveEvent());setFormValues(initEvent);};var handleStartDateChange=function handleStartDateChange(e){setDateStart(e);setFormValues(_objectSpread(_objectSpread({},formValues),{},{start:e}));};var handleEndDateChange=function handleEndDateChange(e){setDateEnd(e);setFormValues(_objectSpread(_objectSpread({},formValues),{},{end:e}));};var handleSubmitForm=function handleSubmitForm(e){e.preventDefault();var momentStart=moment(start);var momentEnd=moment(end);if(momentStart.isSameOrAfter(momentEnd)){return Swal.fire('Error','La fecha fin debe de ser mayor a la fecha de inicio','error');}if(title.trim().length<2){return setTitleValid(false);}if(activeEvent){dispatch(eventStartUpdate(formValues));}else{dispatch(eventStartAddNew(formValues));}setTitleValid(true);closeModal();dispatch(eventStartLoading());};return/*#__PURE__*/_jsxs(Modal,{isOpen:modalOpen,onRequestClose:closeModal,style:customStyles,closeTimeoutMS:200,className:\"modal\",overlayClassName:\"modal-fondo\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",activeEvent?'Editar evento':'Nuevo evento',\" \"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"container\",onSubmit:handleSubmitForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha y hora inicio\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:handleStartDateChange,value:dateStart,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha y hora fin\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:handleEndDateChange,value:dateEnd,minDate:dateStart,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Titulo y notas\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(!titleValid&&'is-invalid',\" \"),placeholder:\"T\\xEDtulo del evento\",name:\"title\",autoComplete:\"off\",value:title,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Una descripci\\xF3n corta\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",placeholder:\"Notas\",rows:\"5\",name:\"notes\",value:notes,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Informaci\\xF3n adicional\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-outline-primary btn-block\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-save\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Guardar\"})]})]})]});};","map":{"version":3,"sources":["/home/fabbry/Desktop/Mern-Calendari/calendar-app/src/components/calendar/CalendarModal.js"],"names":["React","useState","useEffect","useSelector","useDispatch","moment","Modal","DateTimePicker","Swal","uiCloseModal","eventStartLoading","eventClearActiveEvent","eventStartAddNew","eventStartUpdate","customStyles","content","top","left","right","bottom","marginRight","transform","setAppElement","now","minutes","seconds","add","nowPlus1","clone","initEvent","title","notes","start","toDate","end","CalendarModal","state","ui","modalOpen","calendar","activeEvent","dispatch","dateStart","setDateStart","dateEnd","setDateEnd","titleValid","setTitleValid","formValues","setFormValues","handleInputChange","target","name","value","closeModal","handleStartDateChange","e","handleEndDateChange","handleSubmitForm","preventDefault","momentStart","momentEnd","isSameOrAfter","fire","trim","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport moment from 'moment';\nimport Modal from 'react-modal';\nimport DateTimePicker from 'react-datetime-picker';\nimport Swal from 'sweetalert2';\n\nimport { uiCloseModal } from '../../actions/ui';\nimport { eventStartLoading } from '../../actions/events';\nimport { eventClearActiveEvent, eventStartAddNew, eventStartUpdate } from '../../actions/events';\n\n\nconst customStyles = {\n    content: {\n        top: '50%',\n        left: '50%',\n        right: 'auto',\n        bottom: 'auto',\n        marginRight: '-50%',\n        transform: 'translate(-50%, -50%)'\n    }\n};\nModal.setAppElement('#root');\n\nconst now = moment().minutes(0).seconds(0).add(1, 'hours'); // 3:00:00\nconst nowPlus1 = now.clone().add(1, 'hours');\n\nconst initEvent = {\n    title: '',\n    notes: '',\n    start: now.toDate(),\n    end: nowPlus1.toDate()\n}\n\n\nexport const CalendarModal = () => {\n\n    const { modalOpen } = useSelector(state => state.ui);\n    const { activeEvent } = useSelector(state => state.calendar);\n    const dispatch = useDispatch();\n\n    const [dateStart, setDateStart] = useState(now.toDate());\n    const [dateEnd, setDateEnd] = useState(nowPlus1.toDate());\n    const [titleValid, setTitleValid] = useState(true);\n\n    const [formValues, setFormValues] = useState(initEvent);\n\n    const { notes, title, start, end } = formValues;\n\n    useEffect(() => {\n        if (activeEvent) {\n            setFormValues(activeEvent);\n        } else {\n            setFormValues(initEvent);\n        }\n    }, [activeEvent, setFormValues])\n\n\n\n    const handleInputChange = ({ target }) => {\n        setFormValues({\n            ...formValues,\n            [target.name]: target.value\n        });\n    }\n\n\n    const closeModal = () => {\n        // TODO: cerrar el modal\n        dispatch(uiCloseModal());\n        dispatch(eventClearActiveEvent());\n        setFormValues(initEvent);\n    }\n\n    const handleStartDateChange = (e) => {\n        setDateStart(e);\n        setFormValues({\n            ...formValues,\n            start: e\n        })\n    }\n\n    const handleEndDateChange = (e) => {\n        setDateEnd(e);\n        setFormValues({\n            ...formValues,\n            end: e\n        })\n    }\n\n    const handleSubmitForm = (e) => {\n        e.preventDefault();\n\n        const momentStart = moment(start);\n        const momentEnd = moment(end);\n\n        if (momentStart.isSameOrAfter(momentEnd)) {\n            return Swal.fire('Error', 'La fecha fin debe de ser mayor a la fecha de inicio', 'error');\n        }\n\n        if (title.trim().length < 2) {\n            return setTitleValid(false);\n        }\n\n        if (activeEvent) {\n            dispatch(eventStartUpdate(formValues))\n        } else {\n            dispatch(eventStartAddNew(formValues));\n        }\n\n\n        setTitleValid(true);\n        closeModal();\n        dispatch(eventStartLoading());\n\n    }\n\n\n    return (\n        <Modal\n            isOpen={modalOpen}\n            onRequestClose={closeModal}\n            style={customStyles}\n            closeTimeoutMS={200}\n            className=\"modal\"\n            overlayClassName=\"modal-fondo\"\n        >\n            <h1> {(activeEvent) ? 'Editar evento' : 'Nuevo evento'} </h1>\n            <hr />\n            <form\n                className=\"container\"\n                onSubmit={handleSubmitForm}\n            >\n\n                <div className=\"form-group\">\n                    <label>Fecha y hora inicio</label>\n                    <DateTimePicker\n                        onChange={handleStartDateChange}\n                        value={dateStart}\n                        className=\"form-control\"\n                    />\n                </div>\n\n                <div className=\"form-group\">\n                    <label>Fecha y hora fin</label>\n                    <DateTimePicker\n                        onChange={handleEndDateChange}\n                        value={dateEnd}\n                        minDate={dateStart}\n                        className=\"form-control\"\n                    />\n                </div>\n\n                <hr />\n                <div className=\"form-group\">\n                    <label>Titulo y notas</label>\n                    <input\n                        type=\"text\"\n                        className={`form-control ${!titleValid && 'is-invalid'} `}\n                        placeholder=\"Título del evento\"\n                        name=\"title\"\n                        autoComplete=\"off\"\n                        value={title}\n                        onChange={handleInputChange}\n                    />\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">Una descripción corta</small>\n                </div>\n\n                <div className=\"form-group\">\n                    <textarea\n                        type=\"text\"\n                        className=\"form-control\"\n                        placeholder=\"Notas\"\n                        rows=\"5\"\n                        name=\"notes\"\n                        value={notes}\n                        onChange={handleInputChange}\n                    ></textarea>\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">Información adicional</small>\n                </div>\n\n                <button\n                    type=\"submit\"\n                    className=\"btn btn-outline-primary btn-block\"\n                >\n                    <i className=\"far fa-save\"></i>\n                    <span> Guardar</span>\n                </button>\n\n            </form>\n\n        </Modal>\n    )\n}"]},"metadata":{},"sourceType":"module"}